<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .question-option:hover {
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-3xl p-8 space-y-8">
        <h1 class="text-3xl font-bold text-center text-slate-800">Medical Concepts Quiz</h1>
        <p class="text-center text-slate-600">
            Select the best answer for each question and click "Submit Quiz" at the end.
        </p>
        <div id="quiz" class="space-y-6">
            <!-- Questions will be dynamically inserted here by JavaScript -->
        </div>

        <button id="submitBtn" class="w-full py-3 px-6 text-lg font-semibold rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
            Submit Quiz
        </button>

        <div id="results" class="hidden mt-8 p-6 bg-slate-100 rounded-xl">
            <!-- Results will be displayed here -->
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "A 28-year-old patient reports her LMP was November 8, 2024. Using Naegele’s rule as described in the handout, her expected date of delivery (EDC) is:",
                options: ["A. July 15, 2025", "B. August 15, 2025", "C. May 1, 2025", "D. February 15, 2026"],
                correct: "B. August 15, 2025"
            },
            {
                question: "A pregnant woman’s LMP was December 16, 2021 and today is February 14, 2022. Using the method in the notes, her age of gestation (AOG) is approximately:",
                options: ["A. 6 weeks 2 days", "B. 8 weeks 4 days", "C. 10 weeks 3 days", "D. 12 weeks 0 days"],
                correct: "B. 8 weeks 4 days"
            },
            {
                question: "A biophysical profile (BPP) returns a score of 6 (out of 10). Based on the scoring guidance in the handout, the most appropriate interpretation/action is:",
                options: ["A. Reassuring — no further testing needed", "B. Immediate delivery — fetus is not viable", "C. Indeterminate — perform additional confirmatory testing", "D. Fetal death — no further obstetric interventions indicated"],
                correct: "C. Indeterminate — perform additional confirmatory testing"
            },
            {
                question: "A clinician performing an antenatal assessment notes the mother has an android pelvis. According to the notes, which statement is most accurate regarding labor in android pelvis type?",
                options: ["A. Android pelvis is the most favorable for vaginal birth", "B. Android pelvis is narrow and may increase the likelihood of cesarean delivery", "C. Android pelvis is wide and shallow and rarely causes labor problems", "D. Android pelvis is only found in multiparous women"],
                correct: "B. Android pelvis is narrow and may increase the likelihood of cesarean delivery"
            },
            {
                question: "What is the primary purpose of Leopold’s maneuvers as stated in the document?",
                options: ["A. Assess maternal blood pressure response to position change", "B. Estimate fetal size, presentation, position, engagement and attitude", "C. Measure fundal height in centimeters", "D. Screen for maternal urinary infection"],
                correct: "B. Estimate fetal size, presentation, position, engagement and attitude"
            }
        ];

        const quizEl = document.getElementById('quiz');
        const submitBtn = document.getElementById('submitBtn');
        const resultsEl = document.getElementById('results');

        function buildQuiz() {
            quizData.forEach((currentQuestion, index) => {
                const questionContainer = document.createElement('div');
                questionContainer.classList.add('bg-slate-50', 'p-6', 'rounded-xl', 'shadow-sm', 'border', 'border-slate-200');

                const questionText = document.createElement('p');
                questionText.classList.add('text-lg', 'font-semibold', 'text-slate-800', 'mb-4');
                questionText.textContent = `${index + 1}. ${currentQuestion.question}`;
                questionContainer.appendChild(questionText);

                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('space-y-3');

                currentQuestion.options.forEach((option, optionIndex) => {
                    const label = document.createElement('label');
                    label.classList.add('question-option', 'flex', 'items-center', 'p-3', 'rounded-lg', 'cursor-pointer', 'transition-colors', 'duration-150');

                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `question${index}`;
                    input.value = option;
                    input.classList.add('mr-3', 'text-indigo-600', 'focus:ring-indigo-500', 'h-4', 'w-4');

                    const span = document.createElement('span');
                    span.textContent = option;
                    span.classList.add('text-sm', 'font-medium', 'text-slate-700');

                    label.appendChild(input);
                    label.appendChild(span);
                    optionsContainer.appendChild(label);
                });

                questionContainer.appendChild(optionsContainer);
                quizEl.appendChild(questionContainer);
            });
        }

        function showResults() {
            const answerContainers = quizEl.querySelectorAll('.question-option');
            let numCorrect = 0;
            const incorrectAnswers = [];

            quizData.forEach((currentQuestion, index) => {
                const selector = `input[name=question${index}]:checked`;
                const userAnswerEl = quizEl.querySelector(selector);
                const userAnswer = userAnswerEl ? userAnswerEl.value : null;

                const questionContainer = quizEl.children[index];
                const options = questionContainer.querySelectorAll('label');
                options.forEach(option => {
                    option.classList.remove('bg-green-100', 'bg-red-100', 'font-bold');
                });

                if (userAnswer === currentQuestion.correct) {
                    numCorrect++;
                    if (userAnswerEl) {
                        userAnswerEl.closest('label').classList.add('bg-green-100', 'font-bold');
                    }
                } else {
                    if (userAnswerEl) {
                        userAnswerEl.closest('label').classList.add('bg-red-100');
                    }
                    incorrectAnswers.push({
                        question: currentQuestion.question,
                        yourAnswer: userAnswer || "No answer",
                        correctAnswer: currentQuestion.correct
                    });
                }
                
                // Highlight the correct answer for all questions
                options.forEach(option => {
                    if (option.textContent.trim() === currentQuestion.correct) {
                         option.classList.add('bg-green-100', 'font-bold');
                    }
                });
            });

            resultsEl.innerHTML = `
                <p class="text-xl font-bold mb-4 text-center text-slate-800">
                    You got ${numCorrect} out of ${quizData.length} correct!
                </p>
                <div class="space-y-4">
                    ${incorrectAnswers.map(item => `
                        <div class="p-4 rounded-lg bg-red-50">
                            <p class="font-semibold text-red-800 mb-2">Question: ${item.question}</p>
                            <p class="text-red-700">Your Answer: ${item.yourAnswer}</p>
                            <p class="text-green-700 font-bold">Correct Answer: ${item.correctAnswer}</p>
                        </div>
                    `).join('')}
                </div>
            `;
            resultsEl.classList.remove('hidden');
            window.scrollTo({ top: resultsEl.offsetTop - 50, behavior: 'smooth' });
        }

        submitBtn.addEventListener('click', showResults);

        // Build the quiz on page load
        buildQuiz();
    </script>
</body>
</html>
